# HNG Firebase Auth Example

This example app demonstrates how to use the `hng_firebase_auth` package to implement robust Firebase authentication in your Flutter app. It showcases both the pre-built UI widget and the headless provider for custom UI implementations.

## Features Demonstrated

*   **Pre-built UI**: Using `AuthWidget` for a plug-and-play authentication screen.
*   **Headless Usage**: Using `AuthProvider` to build a custom UI with full control.
*   **Typed Exception Handling**: specific handling for errors like `InvalidCredentialsException`, `NetworkException`, etc.
*   **Social Sign-In**: Implementation of Google and Apple sign-in flows.

## Getting Started

### 1. Requirements

*   Flutter SDK
*   A Firebase project configured for your app (Android/iOS).

### 2. Configuration

This example requires Firebase configuration files to run:

1.  **Android**: `android/app/google-services.json`
2.  **iOS**: `ios/Runner/GoogleService-Info.plist`
3.  **Dart**: `lib/firebase_options.dart` (generated by `flutterfire configure`)

> **Note**: This example assumes you have set up these files. If you are cloning this repo, you will need to provide your own Firebase configuration.

### 3. Installation

Add the dependency to your `pubspec.yaml`:

```yaml
dependencies:
  hng_firebase_auth: ^1.0.1
```

## Usage

### Option A: Pre-built UI (`AuthWidget`)

The simplest way to add authentication is using the `AuthWidget`. It handles the UI, validation, and calling the authentication methods.

```dart
AuthWidget(
  onSuccess: () {
    // Navigate to home screen or show success message
    ScaffoldMessenger.of(context).showSnackBar(
      const SnackBar(content: Text('Welcome! Successfully signed in.')),
    );
  },
  onError: (AuthException error) {
    // Handle error
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text(error.message)),
    );
  },
)
```

### Option B: Headless Usage (`AuthProvider`)

For complete control over the UI, use the methods provided by `AuthProvider`.

1.  **Initialize Provider**: Wrap your app or widget tree with `ChangeNotifierProvider`.

    ```dart
    ChangeNotifierProvider(
      create: (_) => AuthProvider(
        config: const AuthConfig(
          providers: {
            'email': true,
            'google': true,
            'apple': true,
          },
        ),
      ),
      child: MyApp(),
    )
    ```

2.  **Call Methods**: Access the provider to sign in/out.

    ```dart
    final provider = context.read<AuthProvider>();

    try {
      await provider.signInWithEmail(email, password);
    } on InvalidCredentialsException {
      // Handle incorrect password
    } on NetworkException {
      // Handle internet issues
    } catch (e) {
      // Handle other errors
    }
    ```

## Error Handling

The SDK provides typed exceptions for easier error handling:

*   `InvalidCredentialsException`: Wrong email/password.
*   `UserNotFoundException`: Email not registered.
*   `EmailAlreadyInUseException`: Sign up with existing email.
*   `NetworkException`: No internet connection.
*   `SignInCancelledException`: User closed the social sign-in popup.
*   `TooManyRequestsException`: Temporarily blocked due to many failed attempts.

```dart
try {
  await authProvider.signInWithGoogle();
} on SignInCancelledException {
  // User just closed the window, do nothing
} on AuthException catch (e) {
  print('Auth Error: ${e.message}');
}
```
